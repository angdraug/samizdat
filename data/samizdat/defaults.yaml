---
# defaults.yaml
#
# Settings that can be shared between Samizdat sites

# Object Cache
#
# Location of a SynCache object cache, change this if you have your
# cache on a different machine or answering on a non-standard port. It
# is safe to have one object cache for several sites, as long as site
# names remain unique.
#
cache: 'druby://localhost:9000'

# Remote cache must be allowed to call back to the application process.
# If you move your cache away from localhost to a separate cache server,
# update this parameter to tell your application to bind DRuby to a URI
# that is accessible from the cache server.
#
cache_callback: 'druby://localhost:0'

# Template Paths
#
# List of paths where templates can be found. Paths are examined in the
# specified order: to change only some parts of Samizdat layout, you
# only have to put modified templates in your directory and prepend it
# to this list. You can also specify such new list of template paths in
# site-specific configuration which will override global Samizdat
# defaults only for that site.
#
templates:
  - '/usr/share/samizdat/templates/'
  - '/usr/local/share/samizdat/templates/'

# Email Interface
#
# This section defines parameters of email notifications generated by
# Samizdat. Uncomment this section to enable email interface, it is
# needed for verification of email addresses and password recovery.
#
#email:
#
#  # Email address for the From: field of Samizdat emails. Ideally, this
#  # should be a valid address on the same host as the web server (so
#  # that it isn't filtered out as spam), emails to that address should
#  # be forwarded to administrators of the site.
#  #
#  address: 'root@localhost'
#
#  # Program with Senmail command-line interface that can be used to send
#  # outgoing mails.
#  #
#  sendmail: '/usr/sbin/sendmail'

# Language Settings
#
locale:

  # If you can't put .mo files in a proper place where it can be found
  # by GetText facility, specify a custom path here. Specify a full
  # path that doesn't depend on the working directory of CGI scripts.
  #
  #path: '../locale'   # 

  # List of languages supported by the site. First language in this list
  # is used as default for users who don't have language selection
  # configured in their browsers. The list can include languages for
  # which there's no corresponding .mo file, such languages will not be
  # available in UI language selection, but will be included in the
  # message language selection list in advanced message publishing
  # interface.
  #
  languages: [ en, be, de, eo, es, fr, ja, pl, ru, uk ]

  # If set to 'yes', list of languages on the front page will be sorted
  # alphabetically. If set to 'no' or unset, the list will be dispayed
  # in the specified order.
  # 
  sort_languages: no

  # Set to 'yes' to allow users to limit the frontpage to only messages
  # in their single preferred language.
  #
  allow_monolanguage: no

# CSS Themes
#
# List of CSS themes, each theme there should have a corresponding .css
# file in the css/ directory.
#
# Even though one of the themes has the name 'default', this does not
# have to be the default style. Whatever is the first theme in the list
# will be used as the default theme.
#
style: [ default, indy, savannah, sky ]

# Engine Parameters
#
# The timeout, limit, format, and file_extension sections below tune
# different parameters of the Samizdat engine. You don't need to mess
# with most defaults, the only exception can be limit:features_threshold
# parameter, which might need to be adjusted for high-traffic sites.

# Timeouts
#
timeout:
  login: 14400   # 4 * 60 * 60 = 4 hours
  last: 1800   # 60 * 30 = 30 minutes
  moderate: 1800   # 60 * 30 = 30 minutes
  pending_upload: 14400   # 4 * 60 * 60 = 4 hours

# Size Limits
#
limit:
  content: 1048576   # maximum size of a single message in bytes
  page: 20   # number of resources per page
  tags: 50   # number of tags in tags list
  pattern: 7   # maximum size of search query pattern
  features: 5   # number of features on the front page
  features_threshold: 1.5   # minimal rating for features
  title: 100   # max characters displayed in a title string
  short: 1000   # max characters in a short message display
  pending_upload_queue_size: 3   # max number of pending uploads per member
  parts: 10   # max parts file fields in new message form

# Supported Message Formats
#
# Comment out both 'image' and 'other' sections to disable media upload.
#
format:

  # You shouldn't add new inline formats without corresponding changes to
  # the Samizdat message rendering code.
  # 
  inline: [ text/plain, text/html, text/textile, application/x-squish ]

  # This list can include any formats that can be used in <img/> tag.
  #
  image: [ image/jpeg, image/png, image/gif ]

  # All message formats that can't be rendered inline by Samizdat or
  # included in <img/> tag should go into this section.
  #
  other: [ application/pdf, application/ogg, audio/ogg, audio/mpeg, audio/x-mp3,
    video/mpeg, video/quicktime, video/x-msvideo, video/x-ms-asf,
    video/x-ms-wmv, application/vnd.rn-realmedia, video/mp4, video/x-flv,
    application/x-shockwave-flash, application/x-bittorrent,
    application/vnd.oasis.opendocument.graphics,
    application/vnd.oasis.opendocument.presentation,
    application/vnd.oasis.opendocument.spreadsheet,
    application/vnd.oasis.opendocument.text ]

# Extensions that can't be automatically derived from MIME type
#
file_extension: { image/jpeg: jpg, audio/mpeg: mp3, video/quicktime: mov,
  video/x-msvideo: avi, video/x-ms-asf: wmv, video/x-ms-wmv: wmv,
  application/vnd.rn-realmedia: rm, application/x-shockwave-flash: swf,
  application/x-bittorrent: torrent,
  application/vnd.oasis.opendocument.graphics: odg,
  application/vnd.oasis.opendocument.presentation: odp,
  application/vnd.oasis.opendocument.spreadsheet: ods,
  application/vnd.oasis.opendocument.text: odt }

# Plugins: load various plugins that add or change Samizdat
# functionality.
#
# Each plugin is loaded from plugins/<plugin_name>, where plugin_name is
# defined below, plugin loading code is responsible for registering
# itself with a site config.
#
plugins:

  # Content rendering plugins.
  #
  content_inline: [ inline_default, plain_text, html, textile, squish ]
  content_file: [ file_default, image ]

  # Member profile plugins.
  #
  profile: []

  # Access control plugins.
  #
  access: [ role ]

  # Tag management plugins.
  #
  tag: [ tag_default ]

  # Route rewriting plugins. Plugins are chained in the order specified here.
  #
  route: [ language_prefix, blog ]

  # Spam protection plugins.
  #
  spam: [ spam_merge, email_blacklist, poison_field ]

  # Plugin options, grouped by plugin name.
  #
  options:

    # Image dimension limits for reduced image versions
    #
    image:
      full: 800
      short: 256

    # Specify <object/> attributes used to embed Flowplayer Flash video player
    # into video message pages.
    #
    # To enable Flowplayer, add 'flowplayer' to the list of content_file
    # plugins, and make sure the player is accessible from the location
    # specified in 'src' attribute. You can get the player binary from
    # http://flowplayer.org/download.html.
    #
    flowplayer:
      src: 'flowplayer/flowplayer.swf'
      bgcolor: '#000000'

    # Role-based access control
    #
    role:

      # list of actions allowed to any user (guests can't be allowed to
      # vote or moderate due to accountability requirements)
      guest: []

      # list of actions allowed to any registered member
      member: [ post, vote ]

      # list of actions allowed only to moderators
      moderator: [ moderate ]

    # Shared options for spam protection plugins (can be overridden in
    # by options for individual plugins)
    #
    spam:

      # List of user roles (guest, member, moderator) that should go through
      # spam protection when publishing messages. Set to [] (empty list) to
      # disable this sort of spam protection.
      #
      check_roles: [ guest, member ]

    # Spam filter based on a merge of regular expressions
    #
    spam_merge:

      # URL or file path to a meta-list of regular expressions of wiki spam.
      #
      # Set this to 'http://arch.thinkmo.de/cgi-bin/spam-merge' to pull the
      # list of expressions automatically, or refer to local copy like
      # /var/www/spam-merge and set up a process of manual or cron-based
      # updates.
      #
      url: '/dev/null'

      # Exclude certain URIs from the big wiki-spam URI list
      #
      exclude:
        - 'google-watch\.org'
        - 'yahoo-watch\.org'
        - 'wikipedia-watch\.org'
        - 'ln-s\.net'
        - 'namebase\.org'

    # Email blacklist: email addresses matching an entry from this list
    # will be rejected during registration.
    #
    email_blacklist:
      blacklist:
        - !ruby/regexp /@(yopmail.com|i.ua)$/

